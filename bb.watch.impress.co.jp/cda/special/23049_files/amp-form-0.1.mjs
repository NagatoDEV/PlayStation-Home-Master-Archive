(self.AMP=self.AMP||[]).push({n:"amp-form",ev:"0.1",l:true,v:"2105281634000",m:1,f:function(AMP,_){let m;function n(){return m?m:m=Promise.resolve(void 0)}class p{constructor(){this.promise=new Promise(((a,b)=>{this.resolve=a;this.reject=b}))}}function aa(a){return new Promise((b=>{b(a())}))}class ba{constructor(){this.W=new p;this.ba=0}add(a){let b=++this.ba;a.then((c=>{this.ba===b&&this.W.resolve(c)}),(c=>{this.ba===b&&this.W.reject(c)}));return this.W.promise}then(a,b){return this.W.promise.then(a,b)}}function ca(a){return a?Array.prototype.slice.call(a):[]}let r=Array.isArray;let da=Object.prototype.hasOwnProperty,ea=Object.prototype.toString;function t(a){return a||{}}function fa(a,b){let c=[],d=[];for(d.push({t:a,s:b,d:0});0<d.length;){let{d:e,s:f,t:h}=d.shift();if(c.includes(f))throw Error("Source object has a circular reference.");c.push(f);if(h!==f)if(10<e)Object.assign(h,f);else for(let g of Object.keys(f)){a=f[g];if(da.call(h,g)&&(b=h[g],"[object Object]"===ea.call(a)&&"[object Object]"===ea.call(b))){d.push({t:b,s:a,d:e+1});continue}h[g]=a}}}let ha=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function ia(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}function ja(a){let b=Object.create(null);if(!a)return b;for(var c;c=ha.exec(a);){let d=ia(c[1],c[1]);c=c[2]?ia(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b}function ka(a,b){function c(h){f=null;e=a.setTimeout(d,100);b.apply(null,h)}function d(){e=0;f&&c(f)}let e=0,f=null;return function(...h){e?f=h:c(h)}}let u=self.AMP_CONFIG||{},la=("string"==typeof u.cdnProxyRegex?new RegExp(u.cdnProxyRegex):u.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ma(a){if(!self.document||!self.document.head||self.location&&la.test(self.location.origin))return null;let b=self.document.head.querySelector(`meta[name="${a}"]`);return b&&b.getAttribute("content")||null}let na={thirdParty:u.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:u.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof u.thirdPartyFrameRegex?new RegExp(u.thirdPartyFrameRegex):u.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:u.cdnUrl||ma("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:la,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:u.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:u.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:u.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:u.geoApiUrl||ma("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let v=self.__AMP_LOG;function w(){if(!v.user)throw Error("failed to call initLogConstructor");return v.user}function oa(){if(v.dev)return v.dev;throw Error("failed to call initLogConstructor")}function x(a,b,c,d){w().assert(a,b,c,d,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}function y(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return z(a,b)}function A(a,b){var c=B(a);c=C(c);return z(c,b)}function D(a,b){a=B(a);a=C(a);return pa(a,b)?z(a,b):null}function qa(a,b){return ra(C(a),b)}function B(a){return a.nodeType?y((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function C(a){a=B(a);return a.isSingleDoc()?a.win:a}function z(a,b){pa(a,b);a=sa(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function ta(a,b){let c=ra(a,b);if(c)return c;a=sa(a);a[b]=ua();return a[b].promise}function ra(a,b){let c=sa(a)[b];if(c){if(c.promise)return c.promise;z(a,b);return c.promise=Promise.resolve(c.obj)}return null}function sa(a){let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function pa(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function ua(){let a=new p,b=a.promise,c=a.reject,d=a.resolve;b.catch((()=>{}));return{obj:null,promise:b,resolve:d,reject:c,context:null,ctor:null}}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function va(a,b,c=null){c?a.insertBefore(b,c.nextSibling):a.insertBefore(b,a.firstChild)}function wa(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function xa(a){return a.closest?a.closest("form"):wa(a,(b=>ya(b,"form")))}function za(a,b){let c=[];for(let d=a.parentElement;d;d=d.parentElement)b(d)&&c.push(d);return c}function Aa(a){var b="fieldset";/^[\w-]+$/.test(b);b=b.toUpperCase();return za(a,(c=>c.tagName==b))}function ya(a,b){let c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return c?c.call(a,b):!1}function E(a,b){let c=a.length;for(let d=0;d<c;d++)b(a[d],d)}function Ba(a,b,c){let d=qa(a,b);if(d)return d;let e=B(a);return e.whenExtensionsKnown().then((()=>{let f=e.getExtensionVersion(c);return f?y(e.win,"extensions").waitForExtension(c,f):null})).then((f=>f?ta(C(a),b):null))}function F(a){return A(a,"mutator")}let G;let Ca="Webkit webkit Moz moz ms O o".split(" "),Ea={getPropertyPriority:()=>"",getPropertyValue:()=>""};function Ga(a,b,c){var d=a.style;if(!b.startsWith("--")){G||(G=Object.create(null));var e=G[b];if(!e){e=b;if(void 0===d[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);b:{for(let h=0;h<Ca.length;h++){let g=Ca[h]+f;if(void 0!==d[g]){f=g;break b}}f=""}void 0!==d[f]&&(e=f)}G[b]=e}b=e}b&&(b.startsWith("--")?a.style.setProperty(b,c):a.style[b]=c)}function Ha(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}let H;function Ia(a,b,c,d){let h,e=a,f=c;h=l=>{try{return f(l)}catch(q){throw self.__AMP_REPORT_ERROR(q),q}};let g=Ja();let k=!1;d&&(k=d.capture);e.addEventListener(b,h,g?d:k);return()=>{e&&e.removeEventListener(b,h,g?d:k);h=e=f=null}}function Ja(){if(void 0!==H)return H;H=!1;try{let a={get capture(){H=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return H}function I(a,b,c,d){c={detail:c};Object.assign(c,d);return new a.CustomEvent(b,c)}function K(a,b,c,d){return Ia(a,b,c,d)}function Ka(a,b){let c=b;let d=Ia(a,"mouseup",(e=>{try{c(e)}finally{c=null,d()}}),void 0);return d}function La(a){let b;let c=new Promise((d=>{b=Ka(a,d)}));c.then(b,b);return c}function Ma(a){let b=a.getRootNode();let c=null;let d=()=>{let e=b.querySelector("textarea[autoexpand]");e&&!c?c=new Na(a):!e&&c&&(c.dispose(),c=null)};Ia(b,"amp:dom-update",d,void 0);d()}class Na{constructor(a){let b=a.getRootNode();this.R=b.ownerDocument||b;this.j=this.R.defaultView;this.ia=A(a,"viewport");this.B=[];this.B.push(K(b,"input",(e=>{e=e.target;"TEXTAREA"==e.tagName&&e.hasAttribute("autoexpand")&&Oa(e)})));this.B.push(K(b,"mousedown",(e=>{1==e.which&&(e=e.target,"TEXTAREA"==e.tagName&&Pa(e))})));let c=b.querySelectorAll("textarea");this.B.push(K(b,"amp:dom-update",(()=>{c=b.querySelectorAll("textarea")})));let d=ka(this.j,(e=>{e.relayoutAll&&Qa(c)}));this.B.push(this.ia.onResize(d));Ra(c)}dispose(){this.B.forEach((a=>a()))}}function Ra(a){Promise.all(ca(a).map((b=>Sa(b).then((c=>{c&&b.removeAttribute("autoexpand")})))))}function Sa(a){return F(a).measureElement((()=>a.scrollHeight>a.clientHeight))}function Qa(a){E(a,(b=>{"TEXTAREA"==b.tagName&&b.hasAttribute("autoexpand")&&Oa(b)}))}function Pa(a){let b=F(a);Promise.all([b.measureElement((()=>a.scrollHeight)),La(a)]).then((c=>{let d=c[0];let e=0;return b.measureMutateElement(a,(()=>{e=a.scrollHeight}),(()=>{d!=e&&a.removeAttribute("autoexpand")}))}))}function Oa(a){let b=F(a),c=a.ownerDocument.defaultView;let d=0,e=0,f=0;let h=Ta(a);b.measureMutateElement(a,(()=>{let g=c.getComputedStyle(a)||Ea;e=a.scrollHeight;let k=parseInt(g.getPropertyValue("max-height"),10);f=isNaN(k)?1/0:k;d="content-box"==g.getPropertyValue("box-sizing")?-parseInt(g.getPropertyValue("padding-top"),10)+-parseInt(g.getPropertyValue("padding-bottom"),10):parseInt(g.getPropertyValue("border-top-width"),10)+parseInt(g.getPropertyValue("border-bottom-width"),10)}),(()=>h.then((g=>{a.classList.toggle("i-amphtml-textarea-max",g+d>f);let k="iAmphtmlHasExpanded"in a.dataset,l=/google/i.test(c.navigator.vendor)?3:0;if(k||e<=g+l)a.dataset.iAmphtmlHasExpanded="",Ga(a,"height",`${g+d}px`)}))))}function Ta(a){let b=a.ownerDocument,c=b.defaultView,d=b.body,e=F(a),f=a.cloneNode(!1);f.classList.add("i-amphtml-textarea-clone");let h=0,g=0,k=!1;return e.measureMutateElement(d,(()=>{let l=c.getComputedStyle(a)||Ea,q=parseInt(l.getPropertyValue("max-height"),10);h=parseInt(l.getPropertyValue("width"),10);k=isNaN(q)||a.scrollHeight<q}),(()=>{k&&(a.scrollTop=0);Ga(f,"width",`${h}px`);b.body.appendChild(f)})).then((()=>e.measureMutateElement(d,(()=>{g=f.scrollHeight}),(()=>{f.parentElement&&f.parentElement.removeChild(f)})))).then((()=>g))}function L(a){let b=a.elements,c={},d=/^(?:input|select|textarea)$/i,e=/^(?:submit|button|image|file|reset)$/i,f=/^(?:checkbox|radio)$/i;for(let g=0;g<b.length;g++){let k=b[g],l=k.checked,q=k.multiple,J=k.name,Bb=k.options,Cb=k.tagName,Da=k.type,Db=k.value;!J||Ua(k)||!d.test(Cb)||e.test(Da)||f.test(Da)&&!l||(void 0===c[J]&&(c[J]=[]),q?E(Bb,(Fa=>{Fa.selected&&c[J].push(Fa.value)})):c[J].push(Db))}let h=Va(a);h&&h.name&&(a=h.name,void 0===c[a]&&(c[a]=[]),c[h.name].push(h.value));Object.keys(c).forEach((g=>{0==c[g].length&&delete c[g]}));return c}function Va(a){let b=a.elements,c=b.length,d=a.ownerDocument.activeElement;let e=null;for(a=0;a<c;a++){let f=b[a],h=f.type;if("BUTTON"==f.tagName||"submit"==h)if(e||(e=f),d==f)return d}return e}function Ua(a){if(a.disabled)return!0;a=Aa(a);for(let b=0;b<a.length;b++)if(a[b].disabled)return!0;return!1}function Wa(a){switch(a.type){case"select-multiple":case"select-one":a=a.options;for(let b=0;b<a.length;b++)if(a[b].selected!==a[b].defaultSelected)return!1;break;case"checkbox":case"radio":return a.checked===a.defaultChecked;default:return a.value===a.defaultValue}return!0}function Xa(a,b){return a.hasAttribute("verify-xhr")?new Ya(a,b):new Za(a)}function $a(a){(a=a.h.elements)&&E(a,(b=>{b.setCustomValidity("")}))}class ab{constructor(a){this.h=a}onCommit(){$a(this);a:{var a=this.h.elements;for(let b=0;b<a.length;b++){let c=a[b];if(!c.disabled&&!Wa(c)){a=!0;break a}}a=!1}return a?this.sa():Promise.resolve({updatedElements:[],errors:[]})}sa(){return Promise.resolve({updatedElements:[],errors:[]})}}class Za extends ab{}function bb(a,b){if(!a.V){a.V=new ba;let c=()=>a.V=null;a.V.then(c,c)}return a.V.add(b)}function cb(a,b){let c=[],d=a.pa;a.pa=b;for(let g=0;g<b.length;g++){var e=b[g],f=w().assertString(e.name,"Verification errors must have a name property");e=w().assertString(e.message,"Verification errors must have a message property");f=w().assertElement(a.h.querySelector(`[name="${f}"]`),"Verification error name property must match a field name");f.checkValidity()&&(f.setCustomValidity(e),c.push(f))}let h=d.filter((g=>b.every((k=>g.name!==k.name)))).map((g=>{a:{var k=a.h;g=`[name="${g.name}"]`;for(let l=0;l<k.elements.length;l++){let q=k.elements[l];if(ya(q,g)){k=q;break a}}k=null}return k}));return{updatedElements:c.concat(h),errors:b}}class Ya extends ab{constructor(a,b){super(a);this.Y=b;this.V=null;this.pa=[]}sa(){let a=this.Y().then((()=>[]),(b=>db(b)));return bb(this,a).then((b=>cb(this,b)))}}function db(a){return(a=a.response)?a.json().then((b=>b.verifyErrors||[]),(()=>[])):Promise.resolve([])}function eb(a,b){let c=y(a,"platform");return c.isIos()&&11==c.getMajorVersion()?new fb(b):FormData.prototype.entries&&FormData.prototype.delete?new gb(b):new hb(b)}class hb{constructor(a){this.F=a?L(a):Object.create(null)}append(a,b){let c=String(a);this.F[c]=this.F[c]||[];this.F[c].push(String(b))}delete(a){delete this.F[a]}entries(){let a=[];Object.keys(this.F).forEach((c=>{this.F[c].forEach((d=>a.push([c,d])))}));let b=0;return{next(){return b<a.length?{value:a[b++],done:!1}:{value:void 0,done:!0}}}}getFormData(){let a=new FormData;Object.keys(this.F).forEach((b=>{this.F[b].forEach((c=>a.append(b,c)))}));return a}}class gb{constructor(a){this.G=new FormData(a);a&&(a=Va(a))&&a.name&&this.append(a.name,a.value)}append(a,b){this.G.append(a,b)}delete(a){this.G.delete(a)}entries(){return this.G.entries()}getFormData(){return this.G}}class fb extends gb{constructor(a){super(a);a&&E(a.elements,(b=>{"file"==b.type&&0==b.files.length&&(this.G.delete(b.name),this.G.append(b.name,new Blob([]),""))}))}append(a,b,c){b&&"object"==typeof b&&""==b.name&&0==b.size?this.G.append(a,new Blob([]),c||""):this.G.append(a,b)}}let ib={INPUT:!0,SELECT:!0,TEXTAREA:!0};function M(a){let b=0<a.P&&!a.$;if(b!==a.ua){a.h.classList.toggle("amp-form-dirty",b);let c=I(a.j,"amp:form-dirtiness-change",t({isDirty:b}),{bubbles:!0});a.h.dispatchEvent(c)}a.ua=b}function jb(a,b){var c=b.hidden;if(ib[b.tagName]&&b.name&&!c&&!Ua(b)){a:switch(b.tagName){case"INPUT":c="checkbox"==b.type||"radio"==b.type?!b.checked:!b.value;break a;case"TEXTAREA":c=!b.value;break a;case"SELECT":c=!1;break a;default:throw Error(`isFieldEmpty: ${b.tagName} is not a supported field element.`)}(c=c||Wa(b))||(a.ha?(c=b.value,c=a.ha.get(b.name)===c):c=!1);c?(b=b.name,a.L[b]&&(a.L[b]=!1,--a.P)):(b=b.name,a.L[b]||(a.L[b]=!0,++a.P))}}class kb{constructor(a,b){this.h=a;this.j=b;a=B(this.h);this.C=D(a,"amp-form");this.P=0;this.L=Object.create(null);this.ha=null;this.ua=this.$=!1;this.ga();for(a=0;a<this.h.elements.length;++a)jb(this,this.h.elements[a]);M(this)}onSubmitting(){this.$=!0;M(this)}onSubmitError(){this.$=!1;M(this)}onSubmitSuccess(){this.$=!1;this.ha=eb(this.j,this.h).getFormData();this.L=Object.create(null);this.P=0;M(this)}ga(){this.C.addFormEventListener(this.h,"input",this.oa.bind(this));this.C.addFormEventListener(this.h,"reset",this.za.bind(this));this.C.addFormEventListener(this.h,"amp:form-value-change",this.oa.bind(this))}oa(a){jb(this,a.target);M(this)}za(){this.L=Object.create(null);this.P=0;M(this)}}class lb{constructor(){this.A=null}add(a){this.A||(this.A=[]);this.A.push(a);return()=>{this.remove(a)}}remove(a){if(this.A){var b=this.A;a=b.indexOf(a);-1!=a&&b.splice(a,1)}}removeAll(){this.A&&(this.A.length=0)}fire(a){if(this.A)for(let b of this.A)b(a)}getHandlerCount(){var a,b;return null!==(a=null===(b=this.A)||void 0===b?void 0:b.length)&&void 0!==a?a:0}}class mb{constructor(){this.na=new lb}beforeSubmit(a){return this.na.add(a)}fire(a){this.na.fire(a)}}let nb=t({c:!0,v:!0,a:!0,ad:!0});let ob;let pb=/[?&]amp_js[^&]*/,qb=/[?&]amp_gsa[^&]*/,rb=/[?&]amp_r[^&]*/,sb=/[?&]amp_kit[^&]*/,tb=/[?&]usqp[^&]*/;function N(a){ob||(ob=self.document.createElement("a"));var b=ob;b.href="";return new URL(a,b.href)}function ub(a,b,c){if(!b)return a;let d=a.split("#",2),e=d[0].split("?",2);let f=e[0]+(e[1]?c?`?${b}&${e[1]}`:`?${e[1]}&${b}`:`?${b}`);return f+=d[1]?`#${d[1]}`:""}function vb(a){let b=[];for(let d in a){var c=a[d];if(null!=c)if(r(c))for(let e=0;e<c.length;e++){let f=c[e];b.push(`${encodeURIComponent(d)}=${encodeURIComponent(f)}`)}else b.push(`${encodeURIComponent(d)}=${encodeURIComponent(c)}`)}return b.join("&")}function wb(a){"string"==typeof a&&(a=N(a));return na.cdnProxyRegex.test(a.origin)}function xb(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})));c.push.apply(c,d)}return c}function yb(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xb(Object(c),!0).forEach((function(d){var e=c[d];d in a?Object.defineProperty(a,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[d]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xb(Object(c)).forEach((function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))}))}return a}let zb=["GET","POST"];function Ab(a,b,c,d,e={}){let f=t({type:a.Ba}),h=d&&d.successTemplate?d.successTemplate:c;h&&(f.successTemplate={type:"amp-mustache",payload:h.innerHTML});let g=d&&d.errorTemplate?d.errorTemplate:null;g&&(f.errorTemplate={type:"amp-mustache",payload:g.innerHTML});e&&Object.assign(f,e);a=b.xhrUrl;c=b.fetchOpt;b=yb({},c);if((d=c.body)&&"function"==typeof d.getFormData){c=c.body;b.headers["Content-Type"]="multipart/form-data;charset=utf-8";c=c.entries();d=[];for(e=c.next();!e.done;e=c.next())d.push(e.value);b.body=d}return t({originalRequest:{input:a,init:b},ampComponent:f})}class Eb{constructor(a,b){this.M=a;this.D=b;this.Ba="amp-form"}isEnabled(){let a=this.M.getAmpDoc();return a.isSingleDoc()&&a.getRootNode().documentElement.hasAttribute("allow-viewer-render-template")?this.M.hasCapability("viewerRenderTemplate"):!1}assertTrustedViewer(a){return this.M.isTrustedViewer().then((b=>{x(b,"Refused to attempt SSR in untrusted viewer: ",a)}))}ssr(a,b,c=null,d={}){let e;c||(e=this.D.maybeFindTemplate(a));return this.assertTrustedViewer(a).then((()=>this.M.sendMessageAwaitResponse("viewerRenderTemplate",Ab(this,b,e,c,d))))}applySsrOrCsrTemplate(a,b){let c;this.isEnabled()?(x("string"===typeof b.html,"Server side html response must be defined"),c=this.assertTrustedViewer(a).then((()=>this.D.findAndSetHtmlForTemplate(a,b.html)))):c=r(b)?this.D.findAndRenderTemplateArray(a,b):this.D.findAndRenderTemplate(a,b);return c}}class Fb{constructor(a,b){this.fa=b;this.ia=A(a,"viewport");this.ta=y(a.win,"vsync");this.da=null;this.ca="";this.aa=!1;this.K=a.win.document.createElement("div");Ha(this.K,!1);this.K.classList.add("i-amphtml-validation-bubble");this.K.__BUBBLE_OBJ=this;a.getBody().appendChild(this.K)}isActiveOn(a){return this.aa&&a==this.da}hide(){this.aa&&(this.aa=!1,this.da=null,this.ca="",this.ta.run({measure:void 0,mutate:Gb},{bubbleElement:this.K}))}show(a,b){this.isActiveOn(a)&&b==this.ca||(this.aa=!0,this.da=a,this.ca=b,this.ta.run({measure:Hb,mutate:Ib},{message:b,targetElement:a,bubbleElement:this.K,viewport:this.ia,id:this.fa}))}}function Gb(a){a.bubbleElement.removeAttribute("aria-alert");a.bubbleElement.removeAttribute("role");for(var b=a.bubbleElement;b.firstChild;)b.removeChild(b.firstChild);Ha(a.bubbleElement,!1)}function Hb(a){a.targetRect=a.viewport.getLayoutRect(a.targetElement)}function Ib(a){for(var b=a.bubbleElement;b.firstChild;)b.removeChild(b.firstChild);let c=a.bubbleElement.ownerDocument.createElement("div");c.id=`bubble-message-${a.id}`;c.textContent=a.message;a.bubbleElement.setAttribute("aria-labeledby",c.id);a.bubbleElement.setAttribute("role","alert");a.bubbleElement.setAttribute("aria-live","assertive");a.bubbleElement.appendChild(c);Ha(a.bubbleElement,!0);b=a.bubbleElement;a={top:`${a.targetRect.top-10}px`,left:`${a.targetRect.left+a.targetRect.width/2}px`};for(let d in a)Ga(b,d,a[d])}let Jb,Kb,Lb=0;function Mb(a,b){E(b.elements,(c=>{"TEXTAREA"==c.tagName&&a.checkInputValidity(c)}))}class Nb{constructor(a){this.form=a;this.ampdoc=B(a);this.mutator=F(a);this.root=this.ampdoc.getRootNode();this.Z=null}report(){}onBlur(){}onInput(){}inputs(){return O(this.form,"input,select,textarea")}checkInputValidity(a){if("TEXTAREA"===a.tagName&&a.hasAttribute("pattern")&&(a.checkValidity()||"Please match the requested format."===a.validationMessage)){let b=a.getAttribute("pattern"),c=new RegExp(`^${b}$`,"m").test(a.value);a.setCustomValidity(c?"":"Please match the requested format.")}return a.checkValidity()}checkFormValidity(a){Mb(this,a);return a.checkValidity()}reportFormValidity(a){Mb(this,a);return a.reportValidity()}fireValidityEventIfNecessary(){let a=this.Z;this.Z=this.checkFormValidity(this.form);if(a!==this.Z){let b=I(this.form.ownerDocument.defaultView,this.Z?"valid":"invalid",null,{bubbles:!0});this.form.dispatchEvent(b)}}}class Ob extends Nb{report(){this.reportFormValidity(this.form);this.fireValidityEventIfNecessary()}}class Pb extends Nb{constructor(a){super(a);let b=`i-amphtml-validation-bubble-${Lb++}`;this.T=new Fb(this.ampdoc,b)}report(){let a=this.inputs();for(let b=0;b<a.length;b++)if(!this.checkInputValidity(a[b])){a[b].focus();this.T.show(a[b],a[b].validationMessage);break}this.fireValidityEventIfNecessary()}onBlur(a){"submit"!=a.target.type&&this.T.hide()}onInput(a){a=a.target;this.T.isActiveOn(a)&&(this.checkInputValidity(a)?(a.removeAttribute("aria-invalid"),this.T.hide()):(a.setAttribute("aria-invalid","true"),this.T.show(a,a.validationMessage)))}}class Qb extends Nb{constructor(a){super(a);this.Ea=this.form.id?this.form.id:String(Date.now()+Math.floor(100*Math.random()));this.wa=0}reportInput(a){let b=Rb(a);b&&this.showValidationFor(a,b)}hideAllValidations(){let a=this.inputs();for(let b=0;b<a.length;b++)this.hideValidationFor(a[b])}getValidationFor(a,b){if(!a.id)return null;var c=a.validationMessage;c="TEXTAREA"===a.tagName&&"customError"===b&&"Please match the requested format."===c?"patternMismatch":b;let d="__AMP_VALIDATION_"+c;d in a||(a[d]=this.root.querySelector(`[visible-when-invalid=${c}][validation-for=${a.id}]`));return a[d]}showValidationFor(a,b){let c=this.getValidationFor(a,b);if(c){c.textContent.trim()||(c.textContent=a.validationMessage);a.__AMP_VISIBLE_VALIDATION=c;var d=c.getAttribute("id");d||(d=`i-amphtml-aria-desc-${this.Ea}-${this.wa++}`,c.setAttribute("id",d));a.setAttribute("aria-invalid","true");a.setAttribute("aria-describedby",d);this.mutator.mutateElement(c,(()=>c.classList.add("visible")))}}hideValidationFor(a){let b=this.getVisibleValidationFor(a);b&&(delete a.__AMP_VISIBLE_VALIDATION,a.removeAttribute("aria-invalid"),a.removeAttribute("aria-describedby"),this.mutator.mutateElement(b,(()=>b.classList.remove("visible"))))}getVisibleValidationFor(a){return a.__AMP_VISIBLE_VALIDATION}shouldValidateOnInteraction(){throw Error("Not Implemented")}onInteraction(a){a=a.target;let b=!!a.checkValidity&&this.shouldValidateOnInteraction(a);this.hideValidationFor(a);b&&!this.checkInputValidity(a)&&this.reportInput(a)}onBlur(a){this.onInteraction(a)}onInput(a){this.onInteraction(a)}}class Sb extends Qb{report(){this.hideAllValidations();let a=this.inputs();for(let b=0;b<a.length;b++)if(!this.checkInputValidity(a[b])){this.reportInput(a[b]);a[b].focus();break}this.fireValidityEventIfNecessary()}shouldValidateOnInteraction(a){return!!this.getVisibleValidationFor(a)}}class Tb extends Qb{report(){this.hideAllValidations();let a=null;let b=this.inputs();for(let c=0;c<b.length;c++)this.checkInputValidity(b[c])||(a=a||b[c],this.reportInput(b[c]));a&&a.focus();this.fireValidityEventIfNecessary()}shouldValidateOnInteraction(a){return!!this.getVisibleValidationFor(a)}}class Ub extends Qb{shouldValidateOnInteraction(){return!0}onInteraction(a){super.onInteraction(a);this.fireValidityEventIfNecessary()}}class Vb extends Tb{shouldValidateOnInteraction(){return!0}onInteraction(a){super.onInteraction(a);this.fireValidityEventIfNecessary()}}function Wb(a){switch(a.getAttribute("custom-validation-reporting")){case"as-you-go":return new Ub(a);case"show-all-on-submit":return new Tb(a);case"interact-and-submit":return new Vb(a);case"show-first-on-submit":return new Sb(a)}a.ownerDocument&&void 0===Jb&&(Jb=!!document.createElement("form").reportValidity);return Jb?new Ob(a):new Pb(a)}function Rb(a){let b=["badInput"];for(var c in a.validity)b.includes(c)||b.push(c);c=b.filter((d=>!0===a.validity[d]));return c.length?c[0]:null}function Xb(a){var b=a.ownerDocument.defaultView;b.FormProxy||(b.FormProxy=Yb(b));let c=new b.FormProxy(a);"action"in c||Zb(a,c);a.$p=c}function Yb(a){function b(f){this.h=f}let c=b.prototype,d=a.Object,e=d.prototype;[a.HTMLFormElement,a.EventTarget].reduce(((f,h)=>{for(h=h&&h.prototype;h&&h!==e&&!(0<=f.indexOf(h));)f.push(h),h=d.getPrototypeOf(h);return f}),[]).forEach((f=>{for(let h in f){let g=a.Object.getOwnPropertyDescriptor(f,h);if(g&&h.toUpperCase()!=h&&!h.startsWith("on")&&!e.hasOwnProperty.call(c,h))if("function"==typeof g.value){let k=g.value;c[h]=function(){return k.apply(this.h,arguments)}}else{let k={};g.get&&(k.get=function(){return g.get.call(this.h)});g.set&&(k.set=function(l){return g.set.call(this.h,l)});a.Object.defineProperty(c,h,k)}}}));return b}function Zb(a,b){var c=a.ownerDocument.defaultView.HTMLFormElement.prototype.cloneNode.call(a,!1);for(let d in c){if(d in b||d.toUpperCase()==d||d.startsWith("on"))continue;let e=$b[d],f=a[d];if(e){if(e.access==P){let h;if(f&&f.nodeType){c=f;let g=c.nextSibling,k=c.parentNode;k.removeChild(c);try{h=a[d]}finally{k.insertBefore(c,g)}}else h=f;Object.defineProperty(b,d,{get(){return h}})}else if(e.access==Q){let h=e.attr||d;Object.defineProperty(b,d,{get(){var g=b.getAttribute(h);return null==g&&void 0!==e.def?e.def:e.type==ac?"true"===g:e.type==R?null!=g:e.type==bc?(g=g||"",D(a,"url").parse(g).href):g},set(g){e.type==R&&(g=g?"":null);null!=g?b.setAttribute(h,g):b.removeAttribute(h)}})}}else Object.defineProperty(b,d,{get(){return a[d]},set(h){a[d]=h}})}}var Q=1,P=2,bc=1,ac=2,R=3;let $b={acceptCharset:{access:Q,attr:"accept-charset"},accessKey:{access:Q,attr:"accesskey"},action:{access:Q,type:bc},attributes:{access:P},autocomplete:{access:Q,def:"on"},children:{access:P},dataset:{access:P},dir:{access:Q},draggable:{access:Q,type:ac,def:!1},elements:{access:P},encoding:{access:P},enctype:{access:Q},hidden:{access:Q,type:R,def:!1},id:{access:Q,def:""},lang:{access:Q},localName:{access:P},method:{access:Q,def:"get"},name:{access:Q},noValidate:{access:Q,attr:"novalidate",type:R,def:!1},prefix:{access:P},spellcheck:{access:Q},style:{access:P},target:{access:Q,def:""},title:{access:Q},translate:{access:Q}};function cc(a,b){let c=a.getHeadNode(),d=dc(c,ec(c));if(b){let f=a.getRootNode();if(fc(f,d))b(d);else var e=setInterval((()=>{fc(f,d)&&(clearInterval(e),b(d))}),4)}}function dc(a,b){let c=a.__AMP_CSS_SM;c||(c=a.__AMP_CSS_SM=Object.create(null));let d=gc(a,c,"amp-extension=amp-form");if(d)return d.textContent!==b&&(d.textContent=b),d;let e=(a.ownerDocument||a).createElement("style");e.textContent=b;let f=null;e.setAttribute("amp-extension","amp-form");f=gc(a,c,"amp-runtime");va(a,e,f);return c["amp-extension=amp-form"]=e}function gc(a,b,c){return b[c]?b[c]:(a=a.querySelector(`style[${c}]`))?b[c]=a:null}function ec(a){return(a=a.__AMP_CSS_TR)?a('form.amp-form-submit-error [submit-error],form.amp-form-submit-success [submit-success],form.amp-form-submitting [submitting]{display:block}textarea[autoexpand]:not(.i-amphtml-textarea-max){overflow:hidden!important}.i-amphtml-textarea-clone{visibility:hidden;position:absolute;top:-9999px;left:-9999px;height:0!important}.i-amphtml-validation-bubble{transform:translate(-50%,-100%);background-color:#fff;box-shadow:0 5px 15px 0 rgba(0,0,0,.5);max-width:200px;position:absolute;display:block;box-sizing:border-box;padding:10px;border-radius:5px}.i-amphtml-validation-bubble:after{content:" ";position:absolute;bottom:-8px;left:30px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #fff}[visible-when-invalid]{color:red}\n/*# sourceURL=/extensions/amp-form/0.1/amp-form.css*/'):'form.amp-form-submit-error [submit-error],form.amp-form-submit-success [submit-success],form.amp-form-submitting [submitting]{display:block}textarea[autoexpand]:not(.i-amphtml-textarea-max){overflow:hidden!important}.i-amphtml-textarea-clone{visibility:hidden;position:absolute;top:-9999px;left:-9999px;height:0!important}.i-amphtml-validation-bubble{transform:translate(-50%,-100%);background-color:#fff;box-shadow:0 5px 15px 0 rgba(0,0,0,.5);max-width:200px;position:absolute;display:block;box-sizing:border-box;padding:10px;border-radius:5px}.i-amphtml-validation-bubble:after{content:" ";position:absolute;bottom:-8px;left:30px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #fff}[visible-when-invalid]{color:red}\n/*# sourceURL=/extensions/amp-form/0.1/amp-form.css*/'}function fc(a,b){let c=a.styleSheets;for(a=0;a<c.length;a++)if(c[a].ownerNode==b)return!0;return!1}function hc(a){let b=a.documentElement;return["âš¡4email","amp4email"].some((c=>b.hasAttribute(c)))}function ic(a,b,c={}){Ba(a,"amp-analytics-instrumentation","amp-analytics").then((d=>{d&&d.triggerEventForTarget(a,b,c,!0)}))}function jc(a,b){try{return JSON.parse(a)}catch(c){return null===b||void 0===b?void 0:b(c),null}}let kc=["amp-selector"];function lc(a,b){let c=a.h.getAttribute(b);if(c){let d=D(a.o,"url");d.assertHttpsUrl(c,a.h,b);x(!d.isProxyOrigin(c),"form %s should not be on AMP CDN: %s",b,a.h)}return c}function mc(a){let b=a.h.getAttribute("enctype");return"application/x-www-form-urlencoded"===b||"multipart/form-data"===b?b:"multipart/form-data"}function nc(a){if("submitting"===a.J)return n();S(a,"verifying");T(a,"verify",null,3);return oc(a,pc(a)).then((()=>qc(a)))}function rc(a){Ba(a.o,"inputmask","amp-inputmask").then((b=>{b&&b.install()}))}function sc(a){if(!wb(a.j.location)&&a.h.hasAttribute("data-initialize-from-url")){var b=["SELECT","TEXTAREA"],c="color date datetime-local email hidden month number range search tel text time url week".split(" "),d=["checkbox","radio"],e=(h,g)=>{if(!h.hasAttribute("data-amp-replace")&&h.hasAttribute("data-allow-initialization")){g=f[g]||"";var k=h.getAttribute("type")||"text",l=h.tagName;"INPUT"===l?c.includes(k.toLocaleLowerCase())?h.value!==g&&(h.value=g):d.includes(k)&&(g=h.value===g,h.checked!==g&&(h.checked=g)):b.includes(l)&&h.value!==g&&(h.value=g)}},f=ja(a.j.location.search);Object.keys(f).forEach((h=>{let g=a.h.elements[h];g&&(g.nodeType===Node.ELEMENT_NODE?e(g,h):g.length&&E(g,(k=>e(k,h))))}))}}function tc(a){let b=O(a.h,"input[type=password],input[type=file]");x(0==b.length,"input[type=password] or input[type=file] may only appear with form[method=post]")}function uc(a){if(a.ea)return a.ea;let b=a.h.querySelectorAll(kc.join(",")),c=ca(b).map((d=>d.build()));return a.ea=vc(a,c,2e3)}function wc(a){a.h.reset();S(a,"initial");a.h.classList.remove("user-valid");a.h.classList.remove("user-invalid");O(a.h,".user-valid, .user-invalid").forEach((c=>{c.classList.remove("user-valid");c.classList.remove("user-invalid")}));let b=a.h.querySelectorAll(".visible[validation-for]");E(b,(c=>{c.classList.remove("visible")}));xc(a.h)}function vc(a,b,c){return Promise.race([Promise.all(b),a.Da.promise(c)])}function S(a,b){let c=a.J;a.h.classList.remove(`amp-form-${c}`);a.h.classList.add(`amp-form-${b}`);var d=a.h.querySelector(`[${c}]`);if(d){/^[\w-]+$/.test("i-amphtml-rendered");var e=d.querySelector;var f="> [i-amphtml-rendered]".replace(/^|,/g,"$&:scope ");(d=e.call(d,f))&&d.parentElement&&d.parentElement.removeChild(d)}a.J=b}function U(a,b){r(b)&&(b={});let c=a.h.querySelector(`[${a.J}]`);let d=n();if(c){let e=`rendered-message-${a.fa}`;c.setAttribute("role","alert");c.setAttribute("aria-labeledby",e);c.setAttribute("aria-live","assertive");a.D.hasTemplate(c)?d=a.S.applySsrOrCsrTemplate(c,b).then((f=>{let h;r(f)?1===f.length?h=f[0]:(h=document.createElement("div"),f.forEach((g=>h.appendChild(g)))):h=f;h.id=e;h.setAttribute("i-amphtml-rendered","");return a.ma.mutateElement(c,(()=>{c.appendChild(h);let g=I(a.j,"amp:dom-update",null,{bubbles:!0});c.dispatchEvent(g)}))})):a.ma.mutateElement(c,(()=>{}))}return d}function T(a,b,c,d){c=I(a.j,`amp-form.${b}`,t({response:c}));a.O.trigger(a.h,b,c,d)}function V(a,b){let c=a.S.isEnabled();x(!1===c,"[amp-form]: viewerRenderTemplate | %s",b)}function W(a,b){V(a,"Form analytics not supported");let c=t({}),d=L(a.h);for(let e in d)Object.prototype.hasOwnProperty.call(d,e)&&(c["formFields["+e+"]"]=d[e].join(","));c.formId=a.h.id;try{ic(a.h,b,c)}catch(e){oa().error("amp-form","Sending analytics failed:",e)}}function yc(a){void 0===Kb&&(Kb=!!a.j.document.createElement("input").checkValidity);if(Kb){let b=zc(a.h);if(a.qa)return a.U.report(),b}return!0}function Ac(a,b,c){try{let g={form:a.h,actionXhrMutator:a.setXhrAction.bind(a)};a.ka.fire(g)}catch(g){oa().error("amp-form","Form submit service failed: %s",g)}let d=pc(a),e=a.h.getElementsByClassName("i-amphtml-async-input");a.X.onSubmitting();if(!a.N&&"GET"==a.I){V(a,"Non-XHR GETs not supported.");tc(a);if(0===e.length){for(let g=0;g<d.length;g++)a.ra.expandInputValueSync(d[g]);Bc(a,!c);a.X.onSubmitSuccess();return n()}c&&c.preventDefault()}S(a,"submitting");let f=[],h=[];h.push(oc(a,d));E(e,(g=>{let k=Cc(a,g);g.classList.contains("i-async-require-action")?f.push(k):h.push(k)}));return Promise.all(f).then((()=>vc(a,h,1e4).then((()=>{if(a.N)var g=Dc(a,b);else"POST"==a.I?x(!1,"Only XHR based (via action-xhr attribute) submissions are supported for POST requests. %s",a.h):"GET"==a.I&&Bc(a,!0),g=n();return g}),(g=>Ec(a,g,b)))),(g=>Ec(a,g,b)))}function pc(a){return O(a.h,'[type="hidden"][data-amp-replace]')}function Bc(a,b){W(a,"amp-form-submit");b&&a.h.submit();S(a,"initial")}function oc(a,b){let c=[];for(let d=0;d<b.length;d++)c.push(a.ra.expandInputValueAsync(b[d]));return vc(a,c,100)}function Cc(a,b){return b.getImpl().then((c=>c.getValue())).then((c=>{var d=b.getAttribute("name");d=a.h.querySelector(`input[name=${CSS.escape(d)}]`);if(!d){d=t({name:b.getAttribute("name"),hidden:"true"});var e=a.j.document.createElement("input");for(let f in d)e.setAttribute(f,d[f]);d=e}d.setAttribute("value",c);a.h.appendChild(d)}))}function Ec(a,b,c){let d={};b&&b.message&&(d.error=b.message);return X(a,b,d,c)}function X(a,b,c,d,e){S(a,"submit-error");w().error("amp-form","Form submission failed: %s",b);return aa((()=>{U(a,c).then((()=>{T(a,"submit-error",void 0===e?c:e,d-1);a.X.onSubmitError()}))}))}function Dc(a,b){let c;a.S.isEnabled()?c=Fc(a,b):(Gc(a,b),c=a.Y(a.N,a.I).then((d=>Hc(a,d,b)),(d=>Ic(a,d,b))));return c}function qc(a){let b=O(a.h,`[${CSS.escape("no-verify")}]`).map((c=>c.name||c.id));return a.Y(a.Ia,a.I,{["__amp_form_verify"]:!0},b)}function Fc(a,b){let c=L(a.h);return U(a,c).then((()=>a.O.trigger(a.h,"submit",null,b))).then((()=>{let d=a.requestForFormFetch(a.N,a.I);var e=d.fetchOpt||{};var f=e.method;void 0===f?f="GET":(f=f.toUpperCase(),zb.includes(f));e.method=f;e.headers=e.headers||t({});d.fetchOpt=e;f=d.xhrUrl;e=(e=d.fetchOpt)||{};var h=a.j;h=h.origin||N(h.location.href).origin;f=N(f).origin;h==f&&(e.headers=e.headers||{},e.headers["AMP-Same-Origin"]="true");d.fetchOpt=e;f=a.j;e=d.xhrUrl;if(!1!==d.fetchOpt.ampCors){h=N(e);h=ja(h.search);x(!("__amp_source_origin"in h),"Source origin is not allowed in %s",e);f=f.location.href;"string"==typeof f&&(f=N(f));if(wb(f)){h=f.pathname.split("/");x(nb[h[1]],"Unknown path prefix in url %s",f.href);var g=h[2],k="s"==g?"https://"+decodeURIComponent(h[3]):"http://"+decodeURIComponent(g);x(0<k.indexOf("."),"Expected a . in origin %s",k);h.splice(1,"s"==g?3:2);h=k+h.join("/");g=(g=f.search)&&"?"!=g?(g=g.replace(pb,"").replace(qb,"").replace(rb,"").replace(sb,"").replace(tb,"").replace(/^[?&]/,""))?"?"+g:"":"";f=h+g+(f.hash||"")}else f=f.href;f=N(f).origin;f=`${encodeURIComponent("__amp_source_origin")}=${encodeURIComponent(f)}`;e=ub(e,f,void 0)}d.xhrUrl=e;e=a.S;f=e.ssr;h=a.h;let l;(g=a.h.querySelector("[submit-success]"))&&(l=a.D.maybeFindTemplate(g));let q;(g=a.h.querySelector("[submit-error]"))&&(q=a.D.maybeFindTemplate(g));return f.call(e,h,d,{successTemplate:l,errorTemplate:q})})).then((d=>Jc(a,d,b)),(d=>{let e={};d&&d.message&&(e.error=d.message);return X(a,d,e,b)}))}function Gc(a,b){W(a,"amp-form-submit");let c=L(a.h);U(a,c).then((()=>{a.O.trigger(a.h,"submit",null,b)}))}function Hc(a,b,c){return a.ja.xssiJson(b,a.getXssiPrefix()).then((d=>Kc(a,d,c)),(d=>w().error("amp-form","Failed to parse response JSON: %s",d))).then((()=>{W(a,"amp-form-submit-success");Lc(a,b)}))}function Ic(a,b,c){return(b&&b.response?a.ja.xssiJson(b.response,a.getXssiPrefix()).catch((()=>null)):Promise.resolve(null)).then((d=>{X(a,b,d,c);W(a,"amp-form-submit-error");Lc(a,b.response)}))}function Jc(a,b,c){var d=b.init;let e=jc(b.body,(f=>w().error("amp-form","Failed to parse response JSON: %s",f)));return d&&(d=d.status,300<=d)?X(a,d,b,c,e):Kc(a,b,c,e)}function Kc(a,b,c,d){S(a,"submit-success");return aa((()=>{U(a,b||{}).then((()=>{T(a,"submit-success",void 0===d?b:d,c-1);a.X.onSubmitSuccess()}))}))}function Lc(a,b){V(a,"Redirects not supported.");if(b&&b.headers){var c=b.headers.get("AMP-Redirect-To");if(c){x(!a.ya,"Redirects not supported in AMP4Email.",a.h);x("_blank"!=a.Ca,"Redirecting to target=_blank using AMP-Redirect-To is currently not supported, use target=_top instead. %s",a.h);try{let d=D(a.o,"url");d.assertAbsoluteHttpOrHttpsUrl(c);d.assertHttpsUrl(c,"AMP-Redirect-To","Url")}catch(d){x(!1,"The `AMP-Redirect-To` header value must be an absolute URL starting with https://. Found %s",c)}A(a.o,"navigation").navigateTo(a.j,c,"AMP-Redirect-To")}}}class Mc{constructor(a,b){try{Xb(a)}catch(c){oa().error("amp-form","form proxy failed to install",c)}a.__AMP_FORM=this;this.fa=b;this.R=a.ownerDocument;this.j=this.R.defaultView;this.Da=z(this.j,"timer");this.h=a;this.o=B(this.h);this.C=D(this.o,"amp-form");this.ea=null;this.ra=D(this.o,"url-replace");this.D=A(this.o,"templates");this.ja=y(this.j,"xhr");this.O=D(this.o,"action");this.ma=F(this.o);this.M=A(this.o,"viewer");this.S=new Eb(this.M,this.D);this.I=(this.h.getAttribute("method")||"GET").toUpperCase();this.Ca=this.h.getAttribute("target");this.N=lc(this,"action-xhr");this.Ia=lc(this,"verify-xhr");this.xa=mc(this);this.qa=!this.h.hasAttribute("novalidate");this.h.setAttribute("novalidate","");this.qa||this.h.setAttribute("amp-novalidate","");this.h.classList.add("i-amphtml-form");this.J="initial";b=this.h.elements;for(let c=0;c<b.length;c++){let{name:d}=b[c];x("__amp_source_origin"!=d&&"__amp_form_verify"!=d,"Illegal input name, %s found: %s",d,b[c])}this.X=new kb(this.h,this.j);this.U=Wb(this.h);this.Fa=Xa(this.h,(()=>nc(this)));this.O.addToAllowlist("FORM",["clear","submit"],["email"]);this.O.installActionHandler(this.h,this.va.bind(this));this.ga();rc(this);sc(this);this.ka=this.Aa=this.Ha=null;ta(C(a),"form-submit-service").then((c=>{this.ka=c}));this.ya=this.R&&hc(this.R)}getXssiPrefix(){return this.h.getAttribute("xssi-prefix")}requestForFormFetch(a,b,c,d){let e,f,h=t({Accept:"application/json"});if("GET"==b||"HEAD"==b){tc(this);let g=L(this.h);d&&d.forEach((k=>delete g[k]));c&&fa(g,c);e=ub(a,vb(g))}else{e=a;"application/x-www-form-urlencoded"===this.xa?(f=vb(L(this.h)),h=t({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"})):f=eb(this.j,this.h);d&&d.forEach((g=>f.delete(g)));for(let g in c)f.append(g,c[g])}return{xhrUrl:e,fetchOpt:t({body:f,method:b,credentials:"include",headers:h})}}setXhrAction(a){this.N=a}va(a){if(!a.satisfiesTrust(2))return null;if("submit"==a.method)return uc(this).then((()=>"submitting"!=this.J&&yc(this)?Ac(this,a.trust,null):Promise.resolve(null)));"clear"===a.method&&wc(this);return null}ga(){this.o.whenNextVisible().then((()=>{let a=this.h.querySelector("[autofocus]");if(a)try{a.focus()}catch(b){}}));this.C.addFormEventListener(this.h,"submit",this.la.bind(this),!0);this.C.addFormEventListener(this.h,"blur",(a=>{Y(a.target);this.U.onBlur(a)}),!0);this.C.addFormEventListener(this.h,"amp:form-value-change",(a=>{Y(a.target);this.U.onInput(a)}),!0);this.S.isEnabled()||this.C.addFormEventListener(this.h,"change",(a=>{this.Fa.onCommit().then((b=>{let c=b.errors;b.updatedElements.forEach(Y);this.U.onBlur(a);"verifying"===this.J&&(c.length?(S(this,"verify-error"),U(this,t({verifyErrors:c})).then((()=>{T(this,"verify-error",c,2)}))):S(this,"initial"))}))}));this.C.addFormEventListener(this.h,"change",(a=>{Y(a.target);this.U.onInput(a)}))}la(a){if("submitting"==this.J||!yc(this))return a.stopImmediatePropagation(),a.preventDefault(),Promise.resolve(null);(this.N||"POST"==this.I)&&a.preventDefault();return Ac(this,3,a)}Y(a,b,c,d){V(this,"XHRs should be proxied.");a=this.requestForFormFetch(a,b,c,d);return this.ja.fetch(a.xhrUrl,a.fetchOpt)}Ja(){return this.Aa}Ka(){return this.Ha}}function O(a,b){return Array.from(a.elements).filter((c=>ya(c,b)))}function zc(a){O(a,"input,select,textarea,fieldset").forEach((b=>Z(b)));return Z(a)}function xc(a){let b=document.createElement("input");for(let c in b.validity)O(a,`.${CSS.escape(c)}`).forEach((d=>{d.classList.remove(c)}))}function Z(a,b=!1){if(!a.checkValidity)return!0;let c=!1;var d=a.classList.contains("user-valid")?"valid":a.classList.contains("user-invalid")?"invalid":"none";let e=a.checkValidity();"valid"!=d&&e?(a.classList.add("user-valid"),a.classList.remove("user-invalid"),c="invalid"==d):"invalid"==d||e||(a.classList.add("user-invalid"),a.classList.remove("user-valid"),c=!0);if(a.validity)for(var f in a.validity)a.classList.toggle(f,a.validity[f]);if(b&&c){d=Aa(a);for(f=0;f<d.length;f++)Z(d[f]);a.form&&Z(a.form)}return e}function Y(a){Z(a,!0)}function Nc(a){let b=new p;cc(a,b.resolve);return b.promise}function Oc(a){return a.whenReady().then((()=>{let b=a.getRootNode();Pc(b.querySelectorAll("form"));Ma(a);Qc(b);Rc(b)}))}function Pc(a){a&&E(a,((b,c)=>{b.__AMP_FORM||new Mc(b,`amp-form-${c}`)}))}function Qc(a){a.addEventListener("amp:dom-update",(()=>{Pc(a.querySelectorAll("form"))}))}function Rc(a){a.addEventListener("keydown",(b=>{if(!b.defaultPrevented&&"Enter"==b.key&&(b.ctrlKey||b.metaKey)&&"TEXTAREA"===b.target.tagName){var c=b.target.form,d=c?c.__AMP_FORM||null:null;d&&(d.la(b),b.preventDefault())}}))}class Sc{constructor(a){this.Ga=Nc(a).then((()=>Oc(a)));this.o=a;this.B=[];this.H={}}whenInitialized(){return this.Ga}dispose(){for(;0<this.B.length;)this.B.pop()()}addFormEventListener(a,b,c,d){da.call(this.H,b)||(this.H[b]=new WeakMap,this.B.push(K(this.o.getRootNode(),b,(f=>{let{form:h}=f.target;if(!h){f.target;let g=f.target.getAttribute("form");h=g?this.o.getRootNode().querySelector(g):xa(f.target)}h&&this.H[b].has(h)&&this.H[b].get(h).forEach((g=>{g(f)}))}),d)));let e=this.H[b].get(a)||[];e.push(c);this.H[b].set(a,e);this.B.push((()=>{this.H[b].delete(a)}))}}(a=>{a.registerServiceForDoc("form-submit-service",mb);a.registerServiceForDoc("amp-form",Sc)})(self.AMP)}});